.template_integration_otrs:
  extends:
    - .template_integration
  script:
    - !reference [.scripts, zammad_db_unseeded]
    - bundle exec rails test test/integration/otrs_import_test.rb
  variables:
    FF_NETWORK_PER_BUILD: 1 # https://docs.gitlab.com/runner/configuration/feature-flags.html
    IMPORT_OTRS_ENDPOINT: 'http://zammad-ci-otrsimport-app/otrs/public.pl?Action=ZammadMigrator'
    TZ: 'Europe/Berlin' # Required for the zammad-ci-otrsimport-app containers

<<<<<<< HEAD:.gitlab/ci/integration/otrs.yml
'minitest:integration:otrs:6':
  <<: *template_integration_otrs
=======
minitest:integration:otrs:6:
  extends:
    - .template_integration_otrs
>>>>>>> 979ea9caf03b644fdd6525e7af7179c102ee3ac4:.gitlab/ci/test/integration/otrs.yml
  services:
    - name: $CI_REGISTRY/docker/zammad-mysql:stable
      alias: mysql
    - name: $CI_REGISTRY/docker/zammad-postgresql:stable
      alias: postgresql
    - name: $CI_REGISTRY/docker/zammad-redis:stable
      alias: redis
    - name: $CI_REGISTRY/docker/zammad-memcached:stable
      alias: memcached
      command: ['memcached', '-m', '256M']
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-db:otrs6
      alias: zammad-ci-otrsimport-db
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-app:otrs6
      alias: zammad-ci-otrsimport-app

<<<<<<< HEAD:.gitlab/ci/integration/otrs.yml
'minitest:integration:otrs:5':
  <<: *template_integration_otrs
=======
minitest:integration:otrs:5:
  extends:
    - .template_integration_otrs
>>>>>>> 979ea9caf03b644fdd6525e7af7179c102ee3ac4:.gitlab/ci/test/integration/otrs.yml
  services:
    - name: $CI_REGISTRY/docker/zammad-mysql:stable
      alias: mysql
    - name: $CI_REGISTRY/docker/zammad-postgresql:stable
      alias: postgresql
    - name: $CI_REGISTRY/docker/zammad-redis:stable
      alias: redis
    - name: $CI_REGISTRY/docker/zammad-memcached:stable
      alias: memcached
      command: ['memcached', '-m', '256M']
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-db:otrs5
      alias: zammad-ci-otrsimport-db
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-app:otrs5
      alias: zammad-ci-otrsimport-app

<<<<<<< HEAD:.gitlab/ci/integration/otrs.yml
'minitest:integration:otrs:4':
  <<: *template_integration_otrs
=======
minitest:integration:otrs:4:
  extends:
    - .template_integration_otrs
>>>>>>> 979ea9caf03b644fdd6525e7af7179c102ee3ac4:.gitlab/ci/test/integration/otrs.yml
  services:
    - name: $CI_REGISTRY/docker/zammad-mysql:stable
      alias: mysql
    - name: $CI_REGISTRY/docker/zammad-postgresql:stable
      alias: postgresql
    - name: $CI_REGISTRY/docker/zammad-redis:stable
      alias: redis
    - name: $CI_REGISTRY/docker/zammad-memcached:stable
      alias: memcached
      command: ['memcached', '-m', '256M']
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-db:otrs4
      alias: zammad-ci-otrsimport-db
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-app:otrs4
      alias: zammad-ci-otrsimport-app

<<<<<<< HEAD:.gitlab/ci/integration/otrs.yml
'minitest:integration:otrs:33':
  <<: *template_integration_otrs
=======
minitest:integration:otrs:33:
  extends:
    - .template_integration_otrs
>>>>>>> 979ea9caf03b644fdd6525e7af7179c102ee3ac4:.gitlab/ci/test/integration/otrs.yml
  services:
    - name: $CI_REGISTRY/docker/zammad-mysql:stable
      alias: mysql
    - name: $CI_REGISTRY/docker/zammad-postgresql:stable
      alias: postgresql
    - name: $CI_REGISTRY/docker/zammad-redis:stable
      alias: redis
    - name: $CI_REGISTRY/docker/zammad-memcached:stable
      alias: memcached
      command: ['memcached', '-m', '256M']
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-db:otrs33
      alias: zammad-ci-otrsimport-db
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-app:otrs33
      alias: zammad-ci-otrsimport-app

<<<<<<< HEAD:.gitlab/ci/integration/otrs.yml
'minitest:integration:otrs:32':
  <<: *template_integration_otrs
=======
minitest:integration:otrs:32:
  extends:
    - .template_integration_otrs
>>>>>>> 979ea9caf03b644fdd6525e7af7179c102ee3ac4:.gitlab/ci/test/integration/otrs.yml
  services:
    - name: $CI_REGISTRY/docker/zammad-mysql:stable
      alias: mysql
    - name: $CI_REGISTRY/docker/zammad-postgresql:stable
      alias: postgresql
    - name: $CI_REGISTRY/docker/zammad-redis:stable
      alias: redis
    - name: $CI_REGISTRY/docker/zammad-memcached:stable
      alias: memcached
      command: ['memcached', '-m', '256M']
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-db:otrs32
      alias: zammad-ci-otrsimport-db
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-app:otrs32
      alias: zammad-ci-otrsimport-app

<<<<<<< HEAD:.gitlab/ci/integration/otrs.yml
'minitest:integration:otrs:31':
  <<: *template_integration_otrs
=======
minitest:integration:otrs:31:
  extends:
    - .template_integration_otrs
>>>>>>> 979ea9caf03b644fdd6525e7af7179c102ee3ac4:.gitlab/ci/test/integration/otrs.yml
  services:
    - name: $CI_REGISTRY/docker/zammad-mysql:stable
      alias: mysql
    - name: $CI_REGISTRY/docker/zammad-postgresql:stable
      alias: postgresql
    - name: $CI_REGISTRY/docker/zammad-redis:stable
      alias: redis
    - name: $CI_REGISTRY/docker/zammad-memcached:stable
      alias: memcached
      command: ['memcached', '-m', '256M']
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-db:otrs31
      alias: zammad-ci-otrsimport-db
    - name: $CI_REGISTRY/docker/zammad-ci-otrsimport-app:otrs31
      alias: zammad-ci-otrsimport-app
